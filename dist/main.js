"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _got=_interopRequireDefault(require("got")),_jsdom=require("jsdom");function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function asyncGeneratorStep(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function _asyncToGenerator(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){function f(a){asyncGeneratorStep(h,d,e,f,g,"next",a)}function g(a){asyncGeneratorStep(h,d,e,f,g,"throw",a)}var h=a.apply(b,c);f(void 0)})}}var metaCrawler=function(a){return new Promise(/*#__PURE__*/function(){var b=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function b(c,d){var e,f,g,h,i;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return a||d("URL Required!!"),/http[s]?:\/\/(?:[a-z]|[0-9]|[$-_@.&+]|[!*\(\),]|(?:%[0-9a-f][0-9a-f]))+/.test(a)||d("URL is not valid!!"),b.prev=2,b.next=5,_got["default"].get(a);case 5:e=b.sent,f=new _jsdom.JSDOM(e.body),g=f.window.document,h=Array.from(g.querySelectorAll("head meta")),i=h.map(function(a){var b,c=a.attributes,d=c.content,e=c.charset,f=c.property,g=c.name;return{name:(null===f||void 0===f?void 0:f.value)||(null===g||void 0===g?void 0:g.value)||(null===e||void 0===e?void 0:e.value)||(null===(b=a.attributes["http-equiv"])||void 0===b?void 0:b.value),content:(null===d||void 0===d?void 0:d.value)||null,html:null===a||void 0===a?void 0:a.outerHTML}}),c(i),b.next=15;break;case 12:b.prev=12,b.t0=b["catch"](2),d(b.t0.toString());case 15:case"end":return b.stop();}},b,null,[[2,12]])}));return function(){return b.apply(this,arguments)}}())},_default=metaCrawler;exports["default"]=_default;